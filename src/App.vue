<script lang="ts" setup>
import { MapBox, Layer, PopUp } from '@components';
import { Vue3MapBox } from '@types';
import 'vue3-mapbox/dist/style.css';

const feature = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [103.82399847992156, 1.5019413572235867],
            [103.81054343613188, 1.5012805407112169],
            [103.7972179952312, 1.4993044563897642],
            [103.78415051099054, 1.4960321385547404],
            [103.77146685101803, 1.4914951071204035],
            [103.75928918374146, 1.4857370638228942],
            [103.74773480113745, 1.4788134710247218],
            [103.73691498857582, 1.4707910171919931],
            [103.72693395268624, 1.4617469742100464],
            [103.71788781758787, 1.451768452746757],
            [103.70986369915383, 1.4409515628555403],
            [103.70293886622338, 1.4294004879225355],
            [103.69717999682693, 1.4172264808958697],
            [103.69264253656773, 1.4045467924813166],
            [103.68937016531277, 1.3914835416410731],
            [103.68739437729734, 1.3781625392846502],
            [103.68673417865328, 1.3647120764879201],
            [103.68739590523656, 1.3512616889140687],
            [103.68937316247381, 1.3379409093355437],
            [103.69264688777234, 1.3248780202670924],
            [103.69718553486189, 1.312198818715695],
            [103.70294537826642, 1.3000254049338527],
            [103.70987093495198, 1.2884750068294573],
            [103.71789549907432, 1.2776588513406477],
            [103.72694178466631, 1.2676810936309941],
            [103.73692267007088, 1.2586378144033252],
            [103.74774203695151, 1.250616094974831],
            [103.75929569580526, 1.2436931790080028],
            [103.77147238907548, 1.2379357289585424],
            [103.78415486221591, 1.2333991843905863],
            [103.79722099240814, 1.2301272283300897],
            [103.8105449640797, 1.2281513667883623],
            [103.82399847992156, 1.2274906254995126],
            [103.83745199576344, 1.2281513667883623],
            [103.85077596743497, 1.2301272283300897],
            [103.86384209762723, 1.2333991843905863],
            [103.87652457076764, 1.2379357289585424],
            [103.88870126403785, 1.2436931790080028],
            [103.90025492289163, 1.250616094974831],
            [103.91107428977226, 1.2586378144033252],
            [103.92105517517682, 1.2676810936309941],
            [103.93010146076882, 1.2776588513406477],
            [103.93812602489116, 1.2884750068294573],
            [103.94505158157672, 1.3000254049338527],
            [103.95081142498123, 1.312198818715695],
            [103.95535007207079, 1.3248780202670924],
            [103.95862379736933, 1.3379409093355437],
            [103.96060105460658, 1.3512616889140687],
            [103.96126278118986, 1.3647120764879201],
            [103.96060258254579, 1.37816253928465],
            [103.95862679453037, 1.3914835416410731],
            [103.95535442327538, 1.4045467924813166],
            [103.95081696301621, 1.4172264808958697],
            [103.94505809361975, 1.4294004879225355],
            [103.9381332606893, 1.4409515628555403],
            [103.93010914225528, 1.451768452746757],
            [103.92106300715689, 1.4617469742100464],
            [103.91108197126732, 1.470791017191993],
            [103.90026215870567, 1.4788134710247218],
            [103.88870777610168, 1.4857370638228942],
            [103.8765301088251, 1.4914951071204035],
            [103.8638464488526, 1.4960321385547404],
            [103.85077896461193, 1.499304456389764],
            [103.83745352371126, 1.5012805407112169],
            [103.82399847992156, 1.5019413572235867]
          ]
        ]
      }
    }
  ]
};

const BOUNDARY_LINE_LAYER = {
  PAINT: {
    'line-color': '#7147cd',
    'line-width': 10,
    'line-opacity': 0.7
  },
  LAYOUT: {
    'line-join': 'bevel',
    'line-round-limit': 1
  }
};
</script>

<template>
  <MapBox
    class="map"
    :options="{
      style: 'https://worldwidemaps.sqkii.com/api/maps/purple/style.json',
      container: 'mapContainer',
      center: [103.85876175581991, 1.294674696996273],
      zoom: 9,
      maxZoom: 19,
      minZoom: 9
    }"
  >
    <PopUp
      :lng-lat="[103.85876175581991, 1.294674696996273]"
      class-name="hello"
      content="haloooooo"
    />
    <!-- <Marker
      :lng-lat="[103.85876175581991, 1.294674696996273]"
      class-name="hello"
    /> -->

    <Layer
      id="boundary_line_layer"
      source-id="boundary"
      type="line"
      :source="{
        type: 'geojson',
        data: feature
      }"
      :paint="BOUNDARY_LINE_LAYER.PAINT"
      :layout="(BOUNDARY_LINE_LAYER.LAYOUT as Vue3MapBox.LayoutSpecification)"
    />
  </MapBox>
</template>
<style>
* {
  margin: 0;
  padding: 0;
  font-family: inherit;
  box-sizing: inherit;
}
.hello {
  background-image: url(/icon.png);
  background-size: cover;
  width: 30px;
  height: 34px;
}
.container {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.map {
  height: 500px;
  width: 500px;
}
</style>
